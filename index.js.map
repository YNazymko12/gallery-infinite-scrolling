{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst PIXABAY_API_KEY = '40905423-24d24966a8b04fca12252a818';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchImages = (searchedQuery, currentPage, perPage) => {\n  const axiosOptions = {\n    params: {\n      key: PIXABAY_API_KEY,\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: perPage,\n    },\n  };\n\n  return axios.get('', axiosOptions);\n};\n","export const createGalleryCard = ({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `\n        <li class='gallery-card'>\n            <a href=\"${largeImageURL}\">\n                <img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags} loading='lazy\" />\n            </a>\n            <div class=\"gallery-info\">\n                <p class=\"gallery-info-item\">\n                    <b>Likes</b>${likes}\n                </p>\n                    <p class=\"gallery-info-item\">\n                <b>Views</b>${views}\n                </p>\n                <p class=\"gallery-info-item\">\n                    <b>Comments</b>${comments}\n                </p>\n                <p class=\"gallery-info-item\">\n                    <b>Downloads</b>${downloads}\n                </p>\n            </div>\n          </li>`;\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { createGalleryCard } from './js/render-functions';\nimport { root } from 'postcss';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.loader');\nconst observerdEl = document.querySelector('.js-observerd-element');\n\nlet currentPage = 1;\nconst perPage = 15;\nlet searchedValue = '';\n\nlet lightbox = new SimpleLightbox('.js-gallery a');\n\nconst observerOptions = {\n  root: null,\n  rootMargin: '0px 0px 400px 0px',\n  threshold: 1,\n};\n\nconst observerCallBack = async entries => {\n  console.log(entries);\n  if (entries[0].isIntersecting) {\n    try {\n      currentPage += 1;\n      const response = await fetchImages(searchedValue, currentPage, perPage);\n      const galleryMarkup = response.data.hits\n        .map(imgDetails => createGalleryCard(imgDetails))\n        .join('');\n      galleryEl.insertAdjacentHTML('beforeend', galleryMarkup);\n      // smoothScrollByHeight();\n      lightbox.refresh();\n    } catch (error) {\n      console.log(error);\n      showError(`${error}`);\n    }\n  }\n};\n\nconst observer = new IntersectionObserver(observerCallBack, observerOptions);\n\nconst toggleLoader = () => {\n  loaderEl.classList.toggle('is-hidden');\n};\n\nconst showError = message => {\n  iziToast.error({\n    message: message,\n    position: 'topRight',\n    maxWidth: 400,\n  });\n};\n\n// const smoothScrollByHeight = () => {\n//   const galleryCard = document.querySelector('.js-gallery .gallery-card');\n//   if (galleryCard) {\n//     const cardHeight = galleryCard.getBoundingClientRect().height;\n//     window.scrollBy({\n//       top: cardHeight * 2,\n//       behavior: 'smooth',\n//     });\n//   }\n// };\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    searchedValue = searchFormEl.elements.user_query.value.trim();\n    if (searchedValue === '') {\n      return;\n    }\n    galleryEl.innerHTML = '';\n    toggleLoader();\n    currentPage = 1;\n\n    const response = await fetchImages(searchedValue, currentPage, perPage);\n\n    if (response.data.hits.length === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    const galleryMarkup = response.data.hits\n      .map(imgDetails => createGalleryCard(imgDetails))\n      .join('');\n\n    galleryEl.innerHTML = galleryMarkup;\n\n    observer.observe(observerdEl);\n    lightbox.refresh();\n    searchFormEl.reset();\n  } catch (error) {\n    console.log(error);\n    showError(`${error}`);\n  } finally {\n    toggleLoader();\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\n"],"names":["PIXABAY_API_KEY","axios","fetchImages","searchedQuery","currentPage","perPage","axiosOptions","createGalleryCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchFormEl","galleryEl","loaderEl","observerdEl","searchedValue","lightbox","SimpleLightbox","observerOptions","observerCallBack","entries","galleryMarkup","imgDetails","error","showError","observer","toggleLoader","message","iziToast","onSearchFormSubmit","event","response"],"mappings":"owBAEA,MAAMA,EAAkB,qCAExBC,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAc,CAACC,EAAeC,EAAaC,IAAY,CAClE,MAAMC,EAAe,CACnB,OAAQ,CACN,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACL,EAEE,OAAOJ,EAAM,IAAI,GAAIK,CAAY,CACnC,ECpBaC,EAAoB,CAAC,CAChC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,IACS;AAAA;AAAA,uBAEcL,CAAa;AAAA,gDACYD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,kCAIxCC,CAAK;AAAA;AAAA;AAAA,8BAGTC,CAAK;AAAA;AAAA;AAAA,qCAGEC,CAAQ;AAAA;AAAA;AAAA,sCAGPC,CAAS;AAAA;AAAA;AAAA,iBClBzCC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,uBAAuB,EAElE,IAAId,EAAc,EAClB,MAAMC,EAAU,GAChB,IAAIc,EAAgB,GAEhBC,EAAW,IAAIC,EAAe,eAAe,EAEjD,MAAMC,EAAkB,CACtB,KAAM,KACN,WAAY,oBACZ,UAAW,CACb,EAEMC,EAAmB,MAAMC,GAAW,CAExC,GADA,QAAQ,IAAIA,CAAO,EACfA,EAAQ,CAAC,EAAE,eACb,GAAI,CACFpB,GAAe,EAEf,MAAMqB,GADW,MAAMvB,EAAYiB,EAAef,EAAaC,CAAO,GACvC,KAAK,KACjC,IAAIqB,GAAcnB,EAAkBmB,CAAU,CAAC,EAC/C,KAAK,EAAE,EACVV,EAAU,mBAAmB,YAAaS,CAAa,EAEvDL,EAAS,QAAO,CACjB,OAAQO,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBC,EAAU,GAAGD,CAAK,EAAE,CACrB,CAEL,EAEME,EAAW,IAAI,qBAAqBN,EAAkBD,CAAe,EAErEQ,EAAe,IAAM,CACzBb,EAAS,UAAU,OAAO,WAAW,CACvC,EAEMW,EAAYG,GAAW,CAC3BC,EAAS,MAAM,CACb,QAASD,EACT,SAAU,WACV,SAAU,GACd,CAAG,CACH,EAaME,EAAqB,MAAMC,GAAS,CACxC,GAAI,CAGF,GAFAA,EAAM,eAAc,EACpBf,EAAgBJ,EAAa,SAAS,WAAW,MAAM,KAAI,EACvDI,IAAkB,GACpB,OAEFH,EAAU,UAAY,GACtBc,IACA1B,EAAc,EAEd,MAAM+B,EAAW,MAAMjC,EAAYiB,EAAef,EAAaC,CAAO,EAEtE,GAAI8B,EAAS,KAAK,KAAK,SAAW,EAAG,CACnCP,EACE,0EACR,EACM,MACD,CAED,MAAMH,EAAgBU,EAAS,KAAK,KACjC,IAAIT,GAAcnB,EAAkBmB,CAAU,CAAC,EAC/C,KAAK,EAAE,EAEVV,EAAU,UAAYS,EAEtBI,EAAS,QAAQX,CAAW,EAC5BE,EAAS,QAAO,EAChBL,EAAa,MAAK,CACnB,OAAQY,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBC,EAAU,GAAGD,CAAK,EAAE,CACxB,QAAY,CACRG,GACD,CACH,EAEAf,EAAa,iBAAiB,SAAUkB,CAAkB"}